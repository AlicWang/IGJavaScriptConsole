(function(){if(!this.require){var t={},e={},n=function(i,s){var u,a,c=r(s,i),h=r(c,"./index");if(u=e[c]||e[h])return u;if(a=t[c]||t[c=h])return u={id:c,exports:{}},e[c]=u.exports,a(u.exports,function(t){return n(t,o(c))},u),e[c]=u.exports;throw"module "+i+" not found"},r=function(t,e){var n,r,o=[];n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var i=0,s=n.length;s>i;i++)r=n[i],".."==r?o.pop():"."!=r&&""!=r&&o.push(r);return o.join("/")},o=function(t){return t.split("/").slice(0,-1).join("/")};this.require=function(t){return n(t,"")},this.require.define=function(e){for(var n in e)t[n]=e[n]},this.require.modules=t,this.require.cache=e}return this.require}).call(this),this.require.define({javascript_config:function(t,e,n){(function(){var t;t=function(){function t(){}return t.config=function(t,e){return t.SetIndentWidth(4),t.RegisterMatching("(",")"),t.RegisterMatching("[","]"),t.RegisterMatching("{","}"),e.getSession().setMode("ace/mode/javascript"),e.getSession().setTabSize(4),e.getSession().setUseSoftTabs(!0)},t.multiLineCallback=function(){return!1},t.webSocketUrl=function(t){return t+"/eval/javascript"},t}(),n.exports=t}).call(this)}}),this.require.define({ruby_config:function(t,e,n){(function(){var t,e,r,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=function(){function e(){}return e.config=function(t,e){return t.SetIndentWidth(2),t.RegisterMatching("(",")"),t.RegisterMatching("[","]"),t.RegisterMatching("{","}"),e.getSession().setMode("ace/mode/ruby"),e.getSession().setTabSize(2),e.getSession().setUseSoftTabs(!0)},e.multiLineCallback=function(e){var n,i,s,u,a,c,h,l,f,g,p,d,m;for(u=0,c=0,n=0,i=0,s=0,d=e.split("\n"),l=0,g=d.length;g>l;l++)for(a=d[l],s=0,m=a.match(r)||[],f=0,p=m.length;p>f;f++)if(h=m[f],o.call(t,h)>=0?(u++,s++):"("===h?(c++,s++):"{"===h?(n++,s++):"["===h?(i++,s++):"end"===h?(u--,s--):")"===h?(c--,s--):"]"===h?(n--,s--):"}"===h&&(i--,s--),0>u||0>c||0>n||0>i)return!1;return u>0||c>0||n>0||i>0?s>0?s:0:!1},e.webSocketUrl=function(t){return t+"/eval/ruby"},e}(),t=["begin","module","def","class","if","unless","case","for","while","until","do"],r=/\s+|\d+(?:\.\d*)?|"(?:[^"]|\\.)*"|'(?:[^']|\\.)*'|\/(?:[^\/]|\\.)*\/|[-+\/*]|[<>=]=?|:?[a-z@$][\w?!]*|[{}()\[\]]|\.[\w\s]+|[^\w\s]+/gi,n.exports=e}).call(this)}}),this.require.define({websocket_evaulator:function(t,e,n){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t,n,r,o){var i=this;this.onReady=n,this.onMessage=r,this.onError=o,this.evaulate=e(this.evaulate,this),this.ws=new WebSocket(t),this.ws.onopen=function(){return console.info("connection opened"),i.onReady()},this.ws.onmessage=function(t){var e,n;return e=t.data?JSON.parse(t.data):{status:"error",message:"no response"},e?"ok"!==e.status?"error"===e.status?(console.error("error, event=",t),n=e.message?e.message:"Unknown error: "+t,i.failedWithMessage(n)):"info"===e.status?(console.info("server: ",e.message),i.onMessage(e.message)):(console.error("unknown error, event=",t),i.failedWithMessage("unknown error: "+t)):i.success?(i.success(e.result),i.success=null):void 0:(console.error("unexpected data format",t),i.failedWithMessage("unexpected data format: "+t))},this.ws.onclose=function(){return i.failedWithMessage("Connection closed.")},this.ws.onerror=function(t){return console.log("connection error",t),i.failedWithMessage("Connection error!")}}return t.prototype.evaulate=function(t,e,n){var r,o;return o={command:"eval",source:t},r=JSON.stringify(o),this.success=e,this.failure=n,this.ws.send(r)},t.prototype.failedWithMessage=function(t){return console.error(t),this.failure?(this.failure(t),this.failure=null):this.onError(t)},t}(),n.exports=t}).call(this)}}),this.require.define({application:function(t,e,n){(function(){var t,r,o,i,s=function(t,e){return function(){return t.apply(e,arguments)}};r=e("javascript_config"),o=e("ruby_config"),i=e("websocket_evaulator"),t=function(){function t(t,e){var n=this;this.websocketUrl=t,this.language=e,this.onError=s(this.onError,this),this.onMessage=s(this.onMessage,this),this.onReady=s(this.onReady,this),this.onInput=s(this.onInput,this),this.prompt=s(this.prompt,this),this.getConfigurator=s(this.getConfigurator,this),this.getLanguage=s(this.getLanguage,this),this.setLanguage=s(this.setLanguage,this),console.log("[ConsoleController] websocket: "+this.websocketUrl+", language="+this.language),this.jqConsole=$("#console").jqconsole("Connecting to "+t+"\n","> ",".."),this.editor=ace.edit("editor"),this.editor.commands.addCommand({name:"Evaulate",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(t){var e;return e=t.getValue(),n.jqConsole.Write(e+"\n","jqconsole-input"),n.onInput(e)},readOnly:!0}),this.getConfigurator().config(this.jqConsole,this.editor),this.evaulator=new i(this.getConfigurator().webSocketUrl(this.websocketUrl),this.onReady,this.onMessage,this.onError)}return t.prototype.setLanguage=function(t){return this.language=t},t.prototype.getLanguage=function(){return this.language},t.prototype.getConfigurator=function(){if("javascript"===this.language)return r;if("ruby"===this.language)return o;throw new Error("unsupported language: "+this.language)},t.prototype.prompt=function(){return this.jqConsole.Prompt(!0,this.onInput,this.getConfigurator().multiLineCallback,!1)},t.prototype.onInput=function(t){var e,n,r=this;return n=function(t){return r.onMessage(t),r.prompt()},e=function(t){return r.onError(t),r.prompt()},this.evaulator.evaulate(t,n,e)},t.prototype.onReady=function(){return this.prompt()},t.prototype.onMessage=function(t){return this.jqConsole.Write(t+"\n","jqconsole-output")},t.prototype.onError=function(t){return this.jqConsole.Write(t+"\n","jqconsole-error")},t}(),n.exports=function(){var e,n,r;return n="%%WEBSOCKET_URL%%",e="%%LANGUAGE%%",n.match("^%%WEBSOCKET_")&&(n="ws://localhost:3300"),e.match("^%%LANGUAGE")&&(e="ruby"),r=new t(n,e),r.prompt()}}).call(this)}});