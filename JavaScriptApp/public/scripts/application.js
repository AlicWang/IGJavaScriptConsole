(function(){if(!this.require){var e={},n={},t=function(s,i){var u,a,l=o(i,s),c=o(l,"./index");if(u=n[l]||n[c])return u;if(a=e[l]||e[l=c])return u={id:l,exports:{}},n[l]=u.exports,a(u.exports,function(e){return t(e,r(l))},u),n[l]=u.exports;throw"module "+s+" not found"},o=function(e,n){var t,o,r=[];t=/^\.\.?(\/|$)/.test(n)?[e,n].join("/").split("/"):n.split("/");for(var s=0,i=t.length;i>s;s++)o=t[s],".."==o?r.pop():"."!=o&&""!=o&&r.push(o);return r.join("/")},r=function(e){return e.split("/").slice(0,-1).join("/")};this.require=function(e){return t(e,"")},this.require.define=function(n){for(var t in n)e[t]=n[t]},this.require.modules=e,this.require.cache=n}return this.require}).call(this),this.require.define({console_ruby_helper:function(e,n,t){(function(){var e,n,o,r=[].indexOf||function(e){for(var n=0,t=this.length;t>n;n++)if(n in this&&this[n]===e)return n;return-1};n=function(){function n(){}return n.multiLineCallback=function(n){var t,s,i,u,a,l,c,h,f,p,g,d,m;for(u=0,l=0,t=0,s=0,i=0,d=n.split("\n"),h=0,p=d.length;p>h;h++)for(a=d[h],i=0,m=a.match(o)||[],f=0,g=m.length;g>f;f++)if(c=m[f],r.call(e,c)>=0?(u++,i++):"("===c?(l++,i++):"{"===c?(t++,i++):"["===c?(s++,i++):"end"===c?(u--,i--):")"===c?(l--,i--):"]"===c?(t--,i--):"}"===c&&(s--,i--),0>u||0>l||0>t||0>s)return!1;return u>0||l>0||t>0||s>0?i>0?i:0:!1},n}(),e=["begin","module","def","class","if","unless","case","for","while","until","do"],o=/\s+|\d+(?:\.\d*)?|"(?:[^"]|\\.)*"|'(?:[^']|\\.)*'|\/(?:[^\/]|\\.)*\/|[-+\/*]|[<>=]=?|:?[a-z@$][\w?!]*|[{}()\[\]]|[^\w\s]+/gi,t.exports=n}).call(this)}}),this.require.define({application:function(e,n,t){(function(){var e,o,r,s=function(e,n){return function(){return e.apply(n,arguments)}};o=n("console_ruby_helper"),r=function(){function e(e,n,t,o,r){var i=this;null==n&&(n="ruby"),this.onReady=t,this.onMessage=o,this.onError=r,this.evaulate=s(this.evaulate,this),console.log("connect to websocket: "+e),this.ws=new WebSocket(e+("/eval/"+n)),this.language=n,this.ws.onopen=function(){return console.log("opened"),i.onReady()},this.ws.onmessage=function(e){var n,t;return console.log("event",e),n=e.data?JSON.parse(e.data):{status:"error",message:"no response"},n?"ok"!==n.status?"error"===n.status?(console.error("error, event=",e),t=n.message?n.message:"Unknown error: "+e,i.failedWithMessage(t)):"info"===n.status?(console.info("server: ",n.message),i.onMessage(n.message)):(console.error("unknown error, event=",e),i.failedWithMessage("unknown error: "+e)):(console.log("command: ok"),i.success?(i.success(n.result),i.success=null):void 0):(console.error("unexpected data format",e),i.failedWithMessage("unexpected data format: "+e))},this.ws.onclose=function(){return i.failedWithMessage("Connection closed")},this.ws.onerror=function(e){return console.log("error",e),i.failedWithMessage("Unknown error: "+e)}}return e.prototype.failedWithMessage=function(e){return this.failure?(this.failure(e),this.failure=null):this.onError(e)},e.prototype.evaulate=function(e,n,t){var o,r;return r={command:"eval",source:e,language:this.language},o=JSON.stringify(r),this.success=n,this.failure=t,this.ws.send(o)},e}(),e=function(){function e(e,n){this.prompt=s(this.prompt,this),this.onError=s(this.onError,this),this.onMessage=s(this.onMessage,this),this.onReady=s(this.onReady,this),this.jsConsole=$("#console").jqconsole("Connecting to "+e+"\n","> ",".."),this.jsConsole.SetIndentWidth(2),this.jsConsole.RegisterMatching("(",")"),this.jsConsole.RegisterMatching("[","]"),this.jsConsole.RegisterMatching("{","}"),this.processor=new r(e,n,this.onReady,this.onMessage,this.onError)}return e.prototype.onReady=function(){return this.prompt()},e.prototype.onMessage=function(e){return this.jsConsole.Write(e+"\n","jqconsole-output")},e.prototype.onError=function(e){return this.jsConsole.Write(e+"\n","jqconsole-error")},e.prototype.prompt=function(){var e,n=this;return e=function(e){var t,o;return o=function(e){return n.onMessage(e),n.prompt()},t=function(e){return n.onError(e),n.prompt()},n.processor.evaulate(e,o,t)},this.jsConsole.Prompt(!0,e,o.multiLineCallback,!1)},e}(),t.exports=function(){var n,t;return n="%%WEBSOCKET_URL%%",n.match("^%%WEBSOCKET_")&&(n="ws://localhost:3300"),t=new e(n,"ruby"),t.prompt()}}).call(this)}});